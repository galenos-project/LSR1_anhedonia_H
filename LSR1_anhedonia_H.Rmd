---
title: "A systematic review and meta-analysis of pro-dopaminergic interventions for anhedonia - results from human studies"
output: html_document
date: "2024-03-25"
author: "Jaycee Kennett, Claire Friedrich, Edoardo G. Ostinelli <span style='font-size: 15px'></style>"
mainfont: Arialh
editor_options: 
  markdown: 
    wrap: sentence
---

```{r echo = F, include = F, warning = F}
source('util/analysis02 for markdown.R')
all.studies <- unique(c(pwma.acc$studlab,
                        pwma.anhedonia$studlab, 
                        pwma.anxiety$studlab, 
                        pwma.constipation$studlab, 
                        pwma.dizziness$studlab, 
                        pwma.dry_mouth$studlab, 
                        pwma.headache$studlab, 
                        pwma.insomnia$studlab, 
                        pwma.nausea$studlab, 
                        pwma.tol$studlab, 
                        pwma.vomiting$studlab))
all.participants <- sum(df$n_randomised[df$studlab %in% all.studies], na.rm = T)
knitr::opts_chunk$set(echo = T)
```

## Description of the methodological approach

1.  In this first iteration of the living systematic review we searched for randomised controlled trials that compared pro-dopaminergic interventions to placebo in adults with unipolar depression (i.e. any standardised measure, above-threshold symptoms on any standardised measure, or a clinical diagnosis based on any operationalised criteria).

2.  Eight databases were searched from inception up to the 4th of September, 2023: Web of Science Core Collection, BIOSIS Citation Index (Web of Science), CENTRAL, EMBASE (OVID), MEDLINE (OVID), PsycINFO (OVID), and SCOPUS (see appendix for the full search strategies).
    Database search results were imported into [EPPI-Reviewer](https://eppi.ioe.ac.uk/cms/Default.aspx?tabid=2914 "EPPI-Reviewer") and de-duplicated prior to screening.
    All steps related to record screening and data extraction were completed in [EPPI-Reviewer](https://eppi.ioe.ac.uk/cms/Default.aspx?tabid=2914 "EPPI-Reviewer").

3.  Titles and abstracts of the identified records were screened by at least two reviewers (CF, EB, JK, JP); conflicts were resolved through discussion within the screening team and consultation with senior reviewers (AC, EGO).
    We retrieved the full-texts and any supporting documents for all records that were not excluded at the title and abstract screening stage.
    The full-text screening was conducted by at least two reviewers (CF, CA, EB, JK, JP) and conflicts were resolved through discussion between the two reviewers and involvement of a third reviewer (EO, AC).
    Additional information on the full eligibility criteria can be found in the pre-published [protocol](https://wellcomeopenresearch.org/articles/8-425 "Pro-dopaminergic pharmacological interventions for anhedonia in depression: protocol for a living systematic review of human and non-human studies").

4.  Relevant data was extracted using [EPPI-Reviewer](https://eppi.ioe.ac.uk/cms/Default.aspx?tabid=2914 "EPPI-Reviewer") by at least two reviewers (CF, CA, EB, JK).

5.  As specified in our [protocol](https://wellcomeopenresearch.org/articles/8-425 "Pro-dopaminergic pharmacological interventions for anhedonia in depression: protocol for a living systematic review of human and non-human studies"), we focused on:

-   anhedonia symptom severity: using anhedonia-specific scales, anhedonia-specific sub-scales, or individual items focusing on anhedonia (observer-rated or self-rated). Continuous, primary outcome.
-   acceptability: proportion of drop outs for any reason. Binary, secondary outcome.
-   tolerability: the proportion of drop outs due to any adverse event. Binary, secondary outcome.
-   safety: the proportion of specific adverse events. Binary, secondary outcome.
-   anxiety symptom severity: as per observer or self-reported standardised scales. Continuous, secondary outcome.

For anhedonia and anxiety symptom severity, we extracted outcome data reported at 8 weeks post-treatment or manipulation. If information at 8 weeks was not available, we considered eligible data ranging between 4 and 12 weeks (with preference to the time point closest to 8 weeks, and if equidistant the longer outcome). For acceptability, tolerability, safety and specific-adverse events, we extracted outcome data reported at the end of the studies.

6.  When extracting continuous outcomes we extracted mean and standard deviation to two decimal places.
    Where standard error was reported instead, we converted the value to standard deviation.
    Baseline and endpoint values were extracted, where only change in score and baseline or endpoint was reported, the missing value was calculated by adding or subtracting the change score to the baseline or endpoint.

7.  When extracting dichotomous outcomes we extracted natural numbers and where only percentages of participant groups were reported, a value was calculated and rounded up to the nearest natural number.
    Adverse events were extracted using the exact terms they were reported in the included studies.

8.  We assessed risk of bias with the RoB2 tool (Sterne et al. 2019).
    All outcomes for all included studies were assessed as per [CITE] by at least two reviewers (JK, CF, CA, AH) and conflicts were were resolved by discussion between the reviewers or in consultation with senior reviewers (AC, EGO).
    To evaluate biases due to missing evidence and biases across studies the ROB-ME tool was used with the same double screening and conflict resolution process as described above.

9.  Effect sizes were calculated as standardised mean differences (SMDs) for continuous outcomes (anhedonia and anxiety symptom severity) and odds ratios (ORs) for dichotomous outcomes (acceptability, tolerability, and specific-adverse events). We calculated the 95% confidence interval (CI) around the pooled effect size for each meta-analysis.

10. The meta-analyses were conducted using a random effects model with the inverse variance method, using the restricted maximum-likelihood estimator for tau\^2 and the Q-Profile method for the confidence interval of tau\^2. Confidence intervals were adjusted using the Hartung-Knapp method. Prediction intervals were calculated to better report the effect of heterogeneity on the overall pooled effect.

11. Sensitivity analysis method...

12. Subgroup analysis and meta-regressions were also conducted for the following variables: mean age of participants, mean anhedonia baseline score, mean anxiety baseline score, sex (proportion of female participants), mean reward baseline score, and planned treatment duration.
    This was done using a mixed-effects model with the estimation of the between-study heterogeneity tau2 based on the REML method.
    Meta-regressions were only conducted for outcomes where k \> 10.

13. Summary of evidence tables were constructed for all outcomes including a summary of the meta-analytic result, biases within-study, across-study, and due to indirectness.

Please see the final manuscript [CITE], extended data [CITE], and [protocol](https://wellcomeopenresearch.org/articles/8-425 "Pro-dopaminergic pharmacological interventions for anhedonia in depression: protocol for a living systematic review of human and non-human studies") for more details.

A list of abbreviations can be found towards the end of the document.

# Results

Below are the results of the systematic review and meta-analysis including a PRISMA flow diagram (Page et al 2021) for details of the flow of study selection, a table of characteristics for included studies, risk of bias assessment, forest plots for each outcome with accompanying descriptive text.

### [PRISMA diagram]

## Description of included studies

We identified `r length(unique(df$studlab))` eligible studies.
The study characteristics can be found in **Table 1**.
Data from `r cat(paste0(length(all.studies)))` studies contributed with at least one outcome with quantitative data (total of `r all.participants` participants), which included adults from multiple countries.
The mean age of participants was `r mean(df$mean_age, na.rm = T)` years (range `r min(df$mean_age, na.rm = T)` to `r max(df$mean_age, na.rm = T)` years), with a mean proportion of `r mean(df$female_prop, na.rm = T)` female participants (range `r min(df$female_prop, na.rm = T)` to `r max(df$female_prop, na.rm = T)`).
Included studies allocated the participants to treatment lasting between `r min(df$tx_duration, na.rm = T)` to `r max(df$tx_duration, na.rm = T)` weeks (median, `r median(df$tx_duration, na.rm = T)` weeks).

### Risk of Bias assessment

### Primary outcome: reduction in anhedonia scores at 8 weeks (from 4 to 12 weeks)

```{r anhedonia_forest, echo=FALSE, fig.width=12, fig.height=4}
forest(pwma.anhedonia, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'Anhedonia symptoms severity',
       col.square = pwma.anhedonia$data$colour
       )
```

**Figure X** Forest plot for symptoms of anhedonia (primary outcome) comparing pro-dopaminergic interventions vs placebo for individuals with anhedonia at 4-12 weeks (primary timepoint).
SMD: standardised mean difference, 95%CI: 95% confidence intervals, SD: standard deviation.

`r pwma.anhedonia$k.TE` `r ifelse(pwma.anhedonia$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.anhedonia$n.e.pooled, pwma.anhedonia$n.c.pooled), na.rm = T)` participants (`r pwma.anhedonia$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.anhedonia$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.anhedonia$lower.random < 0) & (pwma.anhedonia$upper.random < 0)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.anhedonia$lower.random > 0) & (pwma.anhedonia$upper.random > 0)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.anhedonia$TE.random, 3)` (95%CI from `r round(pwma.anhedonia$lower.random, 3)` to `r round(pwma.anhedonia$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.anhedonia$I2*100, 1)`% (95%CI from `r round(pwma.anhedonia$lower.I2*100, 1)`% to `r round(pwma.anhedonia$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.anhedonia$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.anhedonia$lower.predict, 3)` to `r round(pwma.anhedonia$upper.predict, 3)`).


#### Sub-group and meta-regression analyses
```{r, anhedonia_meta-reg, echo = F, results = 'asis'}
# you will need to change 11 with your k from the meta-regression - not necessarily all the studies contributing to the MA had also data for the regressors.
if (11 < 10) {
  cat(paste0('As there were less than 10 studies, no meta-regression was performed.'), sep = '\n')
} else {
  # here you can nest other if/else statements, e.g., whether beta was significant or not.
  cat(paste0('If you are reading this text, meta-regressions have not been implemented yet.'), sep = '\n')
}
```

### Secondary outcome: Reduction in mean anxiety score at 4-12 weeks

```{r anxiety_forest, echo=FALSE, fig.width=12, fig.height=8}
forest(pwma.anxiety, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'Anxiety symptoms severity',
       col.square = pwma.anxiety$data$colour
)
```

**Figure X** Forest plot for symptoms of anxiety (secondary outcome) comparing pro-dopaminergic interventions vs placebo for individuals with anxiety at 4-12 weeks (primary timepoint).
SMD: standardised mean difference, 95%CI: 95% confidence intervals, SD: standard deviation.

11 studies contributed to the meta-analysis with a total of 3517 participants.
Pro-dopaminergic interventions showed a small significant effect reducing symptoms of anxiety with a SMD of -0.1656, p=\<.0001 The study results were not significantly heterogeneous with p=.560.There were no significant differences between subgroups with Q=4.44 (2) p=.108

Data were available to conduct meta-regressions for age, sex, and anxiety baseline score, all using mixed effects models, none of which were statistically significant.
Meta-regressions were not applicable for anhedonia baseline score, reward baseline score or treatment duration.

### Secondary outcome: Dropouts due to any reason

```{r acceptability_forest, echo=FALSE, fig.width=12, fig.height=14}
forest(pwma.acc, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'Dropout due to any reasons',
       col.square = pwma.acc$data$colour
)
```

**Figure X** Forest plot for dropouts due to any reason for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks.
OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.acc$k.TE` `r ifelse(pwma.acc$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.acc$n.e.pooled, pwma.acc$n.c.pooled), na.rm = T)` participants (`r pwma.acc$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.acc$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.acc$lower.random < 1) & (pwma.acc$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.acc$lower.random > 1) & (pwma.acc$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.acc$TE.random, 3)` (95%CI from `r round(pwma.acc$lower.random, 3)` to `r round(pwma.acc$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.acc$I2*100, 1)`% (95%CI from `r round(pwma.acc$lower.I2*100, 1)`% to `r round(pwma.acc$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.acc$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.acc$lower.predict, 3)` to `r round(pwma.acc$upper.predict, 3)`).

```{r, acc_meta-reg, echo = F, results = 'asis'}
# you will need to change 11 with your k from the meta-regression - not necessarily all the studies contributing to the MA had also data for the regressors.
if (11 < 10) {
  cat(paste0('As there were less than 10 studies, no meta-regression was performed.'), sep = '\n')
} else {
  # here you can nest other if/else statements, e.g., whether beta was significant or not.
  cat(paste0('If you are reading this text, meta-regressions have not been implemented yet.'), sep = '\n')
}
```

### Secondary outcome: dropouts due to side effects

```{r tolerability_forest, echo=FALSE, fig.width=12, fig.height=14}

forest(pwma.tol, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'Dropout due to side effects',
       col.square = pwma.tol$data$colour
)
```

**Figure X** Forest plot for dropouts due to adverse events for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.tol$k.TE` `r ifelse(pwma.tol$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.tol$n.e.pooled, pwma.tol$n.c.pooled), na.rm = T)` participants (`r pwma.tol$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.acc$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.tol$lower.random < 1) & (pwma.tol$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.tol$lower.random > 1) & (pwma.tol$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.tol$TE.random, 3)` (95%CI from `r round(pwma.tol$lower.random, 3)` to `r round(pwma.tol$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.tol$I2*100, 1)`% (95%CI from `r round(pwma.tol$lower.I2*100, 1)`% to `r round(pwma.tol$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.tol$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.acc$lower.predict, 3)` to `r round(pwma.tol$upper.predict, 3)`).

Meta-regressions were conducted for age, sex, and baseline anxiety score.
Of these, only sex was a significant predictor of dropouts due to adverse events with a beta=-2.960, SE=1.21 95%CI (-5.423; -0.497) and an R\^2=40.63% and p=.022. 

### Secondary outcome: nausea

```{r nausea_forest, echo=FALSE, fig.width=12, fig.height=10}
forest(pwma.nausea, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'Nausea',
       col.square = pwma.nausea$data$colour
)
```

**Figure X** Forest plot for nausea for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.nausea$k.TE` `r ifelse(pwma.nausea$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.nausea$n.e.pooled, pwma.nausea$n.c.pooled), na.rm = T)` participants (`r pwma.nausea$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.nausea$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.nausea$lower.random < 1) & (pwma.nausea$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.nausea$lower.random > 1) & (pwma.nausea$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.nausea$TE.random, 3)` (95%CI from `r round(pwma.nausea$lower.random, 3)` to `r round(pwma.nausea$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.nausea$I2*100, 1)`% (95%CI from `r round(pwma.nausea$lower.I2*100, 1)`% to `r round(pwma.nausea$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.nausea$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.nausea$lower.predict, 3)` to `r round(pwma.nausea$upper.predict, 3)`).

Meta-regressions were conducted for age and sex and neither were significant predictors.

### Secondary outcome: headache

```{r headache_forest, echo=FALSE, fig.width=12, fig.height=12}
forest(pwma.headache, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'headache',
       col.square = pwma.headache$data$colour
)
```

**Figure X** Forest plot for headaches  for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.headache$k.TE` `r ifelse(pwma.headache$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.headache$n.e.pooled, pwma.headache$n.c.pooled), na.rm = T)` participants (`r pwma.headache$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.headache$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.headache$lower.random < 1) & (pwma.headache$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.headache$lower.random > 1) & (pwma.headache$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.headache$TE.random, 3)` (95%CI from `r round(pwma.headache$lower.random, 3)` to `r round(pwma.headache$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.headache$I2*100, 1)`% (95%CI from `r round(pwma.headache$lower.I2*100, 1)`% to `r round(pwma.headache$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.headache$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.headache$lower.predict, 3)` to `r round(pwma.headache$upper.predict, 3)`).

There were no significant subgroup differences between participants assigned to different classes of drug.
Meta-regressions were conducted for age and sex and neither were significant predictors.

### Secondary outcome: insomnia

```{r insomnia_forest, echo=FALSE, fig.width=12, fig.height=10}
forest(pwma.insomnia, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'insomnia',
       col.square = pwma.insomnia$data$colour
)
```

**Figure X** Forest plot for insomnia for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.insomnia$k.TE` `r ifelse(pwma.insomnia$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.insomnia$n.e.pooled, pwma.insomnia$n.c.pooled), na.rm = T)` participants (`r pwma.insomnia$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.insomnia$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.insomnia$lower.random < 1) & (pwma.insomnia$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.insomnia$lower.random > 1) & (pwma.insomnia$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.insomnia$TE.random, 3)` (95%CI from `r round(pwma.insomnia$lower.random, 3)` to `r round(pwma.insomnia$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.insomnia$I2*100, 1)`% (95%CI from `r round(pwma.insomnia$lower.I2*100, 1)`% to `r round(pwma.insomnia$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.insomnia$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.insomnia$lower.predict, 3)` to `r round(pwma.insomnia$upper.predict, 3)`).

There were no significant subgroup differences between participants assigned to different classes of drug.
Meta-regressions were conducted for age and sex and neither were significant predictors.

### Secondary outcome:dry mouth

```{r dry_mouth_forest, echo=FALSE, fig.width=12, fig.height=10}
forest(pwma.dry_mouth, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'dry_mouth',
       col.square = pwma.dry_mouth$data$colour
)
```

**Figure X** Forest plot for dry mouth for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.dry_mouth$k.TE` `r ifelse(pwma.dry_mouth$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.dry_mouth$n.e.pooled, pwma.dry_mouth$n.c.pooled), na.rm = T)` participants (`r pwma.dry_mouth$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.dry_mouth$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.dry_mouth$lower.random < 1) & (pwma.dry_mouth$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.dry_mouth$lower.random > 1) & (pwma.dry_mouth$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.dry_mouth$TE.random, 3)` (95%CI from `r round(pwma.dry_mouth$lower.random, 3)` to `r round(pwma.dry_mouth$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.dry_mouth$I2*100, 1)`% (95%CI from `r round(pwma.dry_mouth$lower.I2*100, 1)`% to `r round(pwma.dry_mouth$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.dry_mouth$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.dry_mouth$lower.predict, 3)` to `r round(pwma.dry_mouth$upper.predict, 3)`).

There were no significant subgroup differences between participants assigned to different classes of drug.
Meta-regressions were conducted for age, sex, and treatment duration of which only sex was a significant predictor with females significantly more likely to report dry mouth with a beta=-2.070, p=.002, 95%CI(-3.834; -0.308) and the model accounting for 55.280% of heterogeneity and p=.024.

### Secondary outcome:constipation

```{r constipation_forest, echo=FALSE, fig.width=12, fig.height=9}
forest(pwma.constipation, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'constipation',
       col.square = pwma.constipation$data$colour
)
```

**Figure X** Forest plot for dropouts due to adverse events for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.constipation$k.TE` `r ifelse(pwma.constipation$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.constipation$n.e.pooled, pwma.constipation$n.c.pooled), na.rm = T)` participants (`r pwma.constipation$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.constipation$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.constipation$lower.random < 1) & (pwma.constipation$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.constipation$lower.random > 1) & (pwma.constipation$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.constipation$TE.random, 3)` (95%CI from `r round(pwma.constipation$lower.random, 3)` to `r round(pwma.constipation$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.constipation$I2*100, 1)`% (95%CI from `r round(pwma.constipation$lower.I2*100, 1)`% to `r round(pwma.constipation$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.constipation$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.constipation$lower.predict, 3)` to `r round(pwma.constipation$upper.predict, 3)`).




There were no significant subgroup differences between participants assigned to different classes of drug.
Meta-regressions were conducted for age, sex, and treatment duration, none of which were found to be significant predictors.

### Secondary outcome: dizziness

```{r dizziness_forest, echo=FALSE, fig.width=12, fig.height=10}
forest(pwma.dizziness, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'dizziness',
       col.square = pwma.dizziness$data$colour
)
```

**Figure X** Forest plot for dizziness for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.dizziness$k.TE` `r ifelse(pwma.dizziness$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.dizziness$n.e.pooled, pwma.dizziness$n.c.pooled), na.rm = T)` participants (`r pwma.dizziness$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.dizziness$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.dizziness$lower.random < 1) & (pwma.dizziness$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.dizziness$lower.random > 1) & (pwma.dizziness$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.dizziness$TE.random, 3)` (95%CI from `r round(pwma.dizziness$lower.random, 3)` to `r round(pwma.dizziness$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.dizziness$I2*100, 1)`% (95%CI from `r round(pwma.dizziness$lower.I2*100, 1)`% to `r round(pwma.dizziness$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.dizziness$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.dizziness$lower.predict, 3)` to `r round(pwma.dizziness$upper.predict, 3)`).

There were no significant subgroup differences between participants assigned to different classes of drug.
Meta-regressions were conducted for age and sex and neither were significant predictors.

### Secondary outcome: vomiting

```{r vomiting_forest, echo=FALSE, fig.width=12, fig.height=5}
forest(pwma.vomiting, 
       sortvar = seTE, 
       print.I2.ci = T, 
       label.e = 'Intervention', 
       label.c = 'Placebo', 
       label.left = 'Favours intervention',
       label.right = "Favours placebo",
       smlab = 'vomiting',
       col.square = pwma.vomiting$data$colour
)
```

**Figure X** Forest plot for vimiting for the comparison of pro-dopaminergic interventions vs placebo at 4-12 weeks. OR: odds ratio, 95%CI: 95% confidence intervals.

`r pwma.vomiting$k.TE` `r ifelse(pwma.vomiting$k.TE>1, 'studies', 'study')` contributed with data to the meta-analysis with a total of `r sum(c(pwma.vomiting$n.e.pooled, pwma.vomiting$n.c.pooled), na.rm = T)` participants (`r pwma.vomiting$n.e.pooled` allocated to pro-dopaminergic interventions, `r pwma.vomiting$n.c.pooled` allocated to pill placebo).

The comparative effect of pro-dopaminergic interventions versus placebo showed `r ifelse(((pwma.vomiting$lower.random < 1) & (pwma.vomiting$upper.random < 1)), 'an effect favouring pro-dopaminergic interventions', ifelse(((pwma.vomiting$lower.random > 1) & (pwma.vomiting$upper.random > 1)), 'an effect favouring placebo', 'a comparable effect not excluding the null effect'))` with a SMD of `r round(pwma.vomiting$TE.random, 3)` (95%CI from `r round(pwma.vomiting$lower.random, 3)` to `r round(pwma.vomiting$upper.random, 3)`). The study results presented an I2 value of `r round(pwma.vomiting$I2*100, 1)`% (95%CI from `r round(pwma.vomiting$lower.I2*100, 1)`% to `r round(pwma.vomiting$upper.I2*100, 1)`%) and a tau2 value of `r round(pwma.vomiting$tau2, 3)` (accounting for a 95% prediction interval from `r round(pwma.vomiting$lower.predict, 3)` to `r round(pwma.vomiting$upper.predict, 3)`).

There were no significant subgroup differences between participants assigned to different classes of drug.

```{r meta-regressions, echo=FALSE, include=FALSE}
#this runs all meta regressions for the below outcomes (which more than 10 studies contribute to)

#set meta-regression results container
meta_regressions_results <- list()
meta_analysis_results <- list(
anxiety_result = pwma.anxiety, 
acc_result = pwma.acc,
tol_result = pwma.tol, 
nausea_result = pwma.nausea,
headache_result = pwma.headache,
insomnia_result = pwma.insomnia,
dry_mouth_result = pwma.dry_mouth,
constipation_result = pwma.constipation,
dizziness_result = pwma.dizziness
)
#set meta regression predictors
predictors <- c("age", "female_prop", "anhedonia_baseline", "anxiety_baseline", "reward_baseline", "tx_duration")

# Function to perform a single meta-regression
perform_meta_regression <- function(meta_result, predictor_var) {
# Correctly constructing the formula using the predictor_var variable
  formula <- as.formula(paste0("~", predictor_var))
  result <- metareg(meta_result, formula)
  return(result)
}
# Iterating over meta-analysis results and predictors
for(meta_result_name in names(meta_analysis_results)) {
  for(predictor_var in predictors) {
    # Constructing a unique key for storing results
    result_key <- paste(meta_result_name, predictor_var, sep = "_")
    # Attempting the meta-regression, catching errors to continue with the next iteration
    result <- tryCatch({
      # Attempt to perform meta-regression
      perform_meta_regression(meta_analysis_results[[meta_result_name]], predictor_var)
      }, error = function(e) {
        # If an error occurs, print a message and return NULL
        message(paste0("Meta-regression failed for ", result_key, ": ", e$message))
        NULL # Return NULL to indicate failure
        }
      )
    # Store the result if the meta-regression was successful; otherwise, result will be NULL
    meta_regressions_results[[result_key]] <- result
  }
}
```

## Reporting bias

## Summary of evidence tables

## Abbreviations

## References
